---
eleventyNavigation:
  key: shim-spn-demo
  title: ScriptProcessor Recording App
  parent: audio-worklet
to_root_dir: ../../../
---

{% extends "../../../_includes/base.njk" %}

{% block content %}

	<style>
		canvas {
			display: block;
			height: 80px;
			border: 1px solid rgb(156 163 175 / var(--tw-border-opacity));
			border-radius: 6px;

			margin: 1em 0;
			width: 100%;
		}
	</style>

	<h1>ScriptProcessor Recording Demo</h1>

	<p>
	Audio Context Status: 
	<span id="ctx-status" classs="capitalize">...</span>
	</p>

	<div class="demo-box">

		<div class="Live">
			<h2>Live</h2>
			<div>
				<div class="my-2">
					<label for="input-gain">Input gain</label>
					<input type="range" min="0" max="200" value="100" id="input-gain">
				</div>

				<button id="monitor">
			Turn monitor <span>on</span>
				</button>

				<button id="viz-toggle">
					<span>Pause</span> visualizer
				</button>
			</div>

			<canvas id="live-canvas"></canvas>
			<canvas id="analyzer-vis"></canvas>
		</div>

		<div id="recording">
			<h2>Recording</h2>

			<div>
				<p>Length: <span id="data-len">0</span>sec</p>
				<button id="record">
					<span>Start</span> Recording
		</button>
			</div>

			<canvas id="recording-canvas"></canvas>

			<div>
				<audio id="player" class="w-full" controls></audio>

				<div class="my-2">
					<a href="" id="download">
						<button>download file</button>
					</a>
				</div>
			</div>
		</div>
	</div>

	<script type="module" src="app.mjs"></script>

{% endblock %}